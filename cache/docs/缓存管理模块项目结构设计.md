# 缓存管理模块项目结构设计

## 1. 整体目录结构

```
cache/
├── src/
│   ├── main/java/org/im/cache/
│   │   ├── core/                   # 核心接口层
│   │   ├── config/                 # 配置管理层
│   │   ├── impl/                   # 实现层
│   │   ├── manager/                # 管理器层
│   │   ├── builder/                # 构建器层
│   │   ├── factory/                # 工厂层
│   │   ├── stats/                  # 统计层
│   │   ├── support/                # 支持组件层
│   │   └── util/                   # 工具类层
│   └── test/java/org/im/cache/     # 测试代码
├── docs/                           # 文档目录
├── pom.xml                         # Maven配置文件
└── README.md                       # 项目说明文档
```


## 2. 各层详细结构

### 2.1 核心接口层 (`core/`)

```
core/
├── Cache.java                      # 统一缓存接口
├── CacheManager.java               # 缓存管理器接口
└── CacheKeyGenerator.java          # 缓存键生成器接口
```


### 2.2 配置管理层 (`config/`)

```
config/
├── CacheConfig.java                # 缓存配置类
├── BackendType.java                # 后端类型枚举
├── CacheConfigBuilder.java         # 缓存配置构建器
└── package-info.java
```


### 2.3 实现层 (`impl/`)

```
impl/
├── cache/
│   ├── AbstractCache.java          # 抽象缓存基类
│   ├── MemoryCache.java            # 内存缓存实现
│   ├── CaffeineCache.java          # Caffeine缓存实现
│   └── package-info.java
├── manager/
│   ├── AbstractCacheManager.java   # 抽象缓存管理器
│   ├── DefaultCacheManager.java    # 默认缓存管理器实现
│   └── package-info.java
└── package-info.java
```


### 2.4 构建器层 (`builder/`)

```
builder/
├── CacheBuilder.java               # 缓存构建器
└── package-info.java
```


### 2.5 工厂层 (`factory/`)

```
factory/
├── CacheFactory.java               # 缓存工厂
└── package-info.java
```


### 2.6 统计层 (`stats/`)

```
stats/
├── CacheStats.java                 # 缓存统计类
├── CacheManagerStats.java          # 缓存管理器统计类
└── package-info.java
```


### 2.7 支持组件层 (`support/`)

```
support/
├── ExpiringValue.java              # 过期值包装器
├── NullValueMarker.java            # 空值标记
├── SimpleKeyGenerator.java         # 简单键生成器
├── ProtectedCache.java             # 保护包装器
└── package-info.java
```


### 2.8 工具类层 (`util/`)

```
util/
├── CacheUtils.java                 # 缓存工具类
├── ValidationUtils.java            # 验证工具类
└── package-info.java
```


## 3. 包设计原则

### 3.1 分层隔离原则
- 各层之间通过接口进行交互
- 上层只能依赖下层，不能反向依赖
- 同一层内的类可以相互依赖

### 3.2 职责单一原则
- 每个包都有明确的职责范围
- 避免功能交叉和重复

### 3.3 易于扩展原则
- 通过接口和抽象类提供扩展点
- 新增实现不影响现有代码

## 4. Maven项目配置

### 4.1 pom.xml结构

```xml
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.im.cache</groupId>
    <artifactId>cache</artifactId>
    <version>2.0.0</version>
    <packaging>jar</packaging>
    
    <properties>
        <maven.compiler.source>8</maven.compiler.source>
        <maven.compiler.target>8</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    
    <dependencies>
        <!-- 必需依赖 -->
        <dependency>
            <groupId>com.github.ben-manes.caffeine</groupId>
            <artifactId>caffeine</artifactId>
            <version>3.1.8</version>
            <optional>true</optional>
        </dependency>
        
        <!-- 日志依赖 -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.36</version>
            <optional>true</optional>
        </dependency>
        
        <!-- 测试依赖 -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.13.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project>
```


## 5. 设计优势

### 5.1 模块化设计
- 各功能模块独立，便于维护和替换
- 清晰的依赖关系，降低耦合度

### 5.2 易于扩展
- 通过接口提供扩展点
- 支持自定义实现

### 5.3 规范性强
- 符合Java标准命名规范
- 遵循Maven标准目录结构

### 5.4 通用性好
- 不依赖特定框架
- 适用于各种Java项目

这种结构设计保证了模块的专业特性，具有良好的可维护性、可扩展性和通用性。